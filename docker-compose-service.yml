version: "3.8"

services:
  crm:
    image: registry-1.docker.io/library/crm:latest
    container_name: crm_container
    hostname: crm
    ports:
      - "8080:8080"
    environment:
      APP_PORT: 8080
      DB_URL: 192.168.122.1:5432
      KEYCLOAK_URL: http://192.168.122.1:8085
      LOGSTASH_URL: 192.168.122.1:12202
      BD_SERVICE_URL: http://192.168.122.1:8086
      CONSUL_URL: http://192.168.122.1:8500


  scheduler:
    image: registry-1.docker.io/library/scheduler:latest
    container_name: scheduler_container
    hostname: scheduler
    ports:
      - "8089:8089"
    environment:
      APP_PORT: 8089
      DB_URL: 192.168.122.1:5432
      KEYCLOAK_URL: http://192.168.122.1:8085
      LOGSTASH_URL: 192.168.122.1:12202
      BD_SERVICE_URL: http://192.168.122.1:8086
      CONSUL_URL: http://192.168.122.1:8500

  consul:
    image: consul:1.14.4
    container_name: consul
    ports:
      - "8400:8400"
      - "8500:8500"
      - "8300:8300"
      - "8600:53/udp"
# docker-compose up -d name